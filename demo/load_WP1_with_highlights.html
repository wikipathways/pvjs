<!DOCTYPE html>
<html style="margin: 0; width: 100%; height: 100%; ">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>Pathvisiojs Simple Built Production Example</title>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  </head>
  <body>
    <!--
    <iframe id="pathway1" src="./template.html" style="width: 800px; height: 570px; border: 1px solid #ccc;"></iframe>
    -->
    <wikipathways-pathvisiojs></wikipathways-pathvisiojs>

    <!-- Required by Highlight Plugin -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.backbone.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.10.2/typeahead.bundle.min.js"></script>
    <script src="https://rawgit.com/caolan/highland/master/dist/highland.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.6/d3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script src="http://www.x-tags.org/js/x-tag-components.js"></script>

    <script src="https://bridgedb.github.io/bridgedbjs/dist/bridgedb-4.0.0.min.js"></script>
    <script src="./lib/pathvisiojs/pathvisiojs-2.1.3.bundle.min.js"></script>

    <script>

      //*
      xtag.register('wikipathways-pathvisiojs', {
        // TODO extends isn't working
        //extends: 'div',
        lifecycle: {
          created: function() {
            // TODO compile the template and insert it as a string, using the script tag method of including another page in this one
            xtag.innerHTML(this, '<iframe id="pathvisiojs-frame" src="./load-one.html" style="width:inherit; height:inherit; margin:0px; border: 0px; " />');
            iFrameResize({
              enablePublicMethods: true,
              resizedCallback: function() {
                console.log('parent says resized');
              }
            },'#pathvisiojs-frame');
          }
        }
      });

      xtag.register('x-foo', {
        lifecycle: {
          created: function() {
            // works because we're not using another component
            this.innerHTML = 'Hello foo';
          }
        },
        methods: {
          hello: function() {
            console.log('hello from x-foo');
          }
        }
      });

      xtag.register('wikipathways-pathvisiojs', {
        lifecycle: {
          created: function() {
            // Since we use xtag.innerHTML, x-foo will be available immediately
            xtag.innerHTML(this, 'Super <x-foo></x-foo>');

            // You can call x-foo methods already
            var foo = this.querySelector('x-foo');
            foo.hello();
          }
        }
      });
      //*/
      //$.ajax()
    </script>
</body>
</html>
